<div class="container">
    <h1 class="mt-3">Brand List</h1>

    <div class="d-flex align-items-center mb-3">
        <button class="btn btn-primary me-3" (click)="showAddBrand()">Add Brand</button>

        <!-- Input để cấu hình số lượng brand hiển thị trên mỗi trang -->
        <label for="itemsPerPage" class="me-2">Items per page:</label>
        <input id="itemsPerPage" type="number" [(ngModel)]="itemsPerPage" class="form-control" style="width: 100px;"
            min="1" max="100" (change)="onItemsPerPageChange()" />
    </div>

    <div class="mt-3">
        <ng-container *ngIf="brands$ | async as brands">
            <table class="table table-bordered mt-3">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Brand Name</th>
                        <th>ImageUrl</th>
                        <th>Is Active</th>
                        <th>CreateAt</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Áp dụng phân trang với số itemsPerPage tùy chỉnh -->
                    <tr *ngFor="let brand of brands | paginate: { itemsPerPage: itemsPerPage, currentPage: page }">
                        <td>B0{{ brand.brandId }}</td>
                        <td>{{ brand.name }}</td>
                        <td>{{ brand.imageUrl }}</td>
                        <td>
                            <span [class.text-success]="brand.isActive" [class.text-danger]="!brand.isActive">
                                {{ brand.isActive ? 'Active' : 'Inactive' }}
                            </span>
                        </td>
                        <td>{{ brand.createdAt | date:'short' }}</td>
                        <td>{{ brand.updatedAt | date:'short' }}</td>
                        <td>
                            <a (click)="updateBrand(brand.brandId)" class="link-update">Update</a>
                            <a (click)="onDeleteBrand(brand.brandId, brand.isActive)" class="link-delete">Delete</a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination Controls -->
            <pagination-controls (pageChange)="page = $event"></pagination-controls>
        </ng-container>
    </div>

    <div *ngIf="isAddBrandVisible" class="overlay" (click)="hideAddBrand()"></div>

    <div *ngIf="isAddBrandVisible" class="modal-container">
        <app-add-or-update-brand [brandToUpdate]="brandToUpdate" (close)="hideAddBrand()" (add)="onAddBrand($event)">
        </app-add-or-update-brand>
    </div>
</div>